<!DOCTYPE html>
<!-- saved from url=(0055)https://admin.kaoshixing.com/baseinfo/admin/select_type -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title>考试系统</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="shortcut icon" href="/static/images/logo.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="stylesheet" type="text/css" href="https://s1.kaoshixing.com/static/plugins/bootstrap/css/bootstrap.min.css?v=9ed71d952357">
  <link rel="stylesheet" type="text/css" href="https://s1.kaoshixing.com/static/base/css/ksx-base.css?v=f66ad3317757">

  <link rel="stylesheet" type="text/css" href="https://s1.kaoshixing.com/static/plugins/bootgrid/jquery.bootgrid.css?v=e0e011486657">
  <link rel="stylesheet" type="text/css" href="https://s3.kaoshixing.com/static/plugins/pikaday/pikaday.css?v=8e3f4c24fd57">
  <link rel="stylesheet" type="text/css" href="https://s1.kaoshixing.com/static/plugins/IconFont/css/styles.min.css?v=155b8a0f0957">
  <link rel="stylesheet" type="text/css" href="https://s0.kaoshixing.com/static/base/css/modal_content_style.css?v=dc8373ade357">
  <link rel="stylesheet" type="text/css" href="https://s0.kaoshixing.com/static/admin/css/select_type.css?v=ecefc06b0957">
  <link rel="stylesheet" type="text/css" href="https://s4.kaoshixing.com/static/plugins/examFont/style.css?v=266d1fcfdf57">
  <style>
    /*.modal_btn_default {*/
    /*line-height: 18px;*/
    /*}*/
    /*.tab-content .tab-wrap1 .com-drop{*/
    /*min-height: 600px;*/
    /*}*/
    .infoBar .actions .dropdown:last-child {
      display: none;
    }
    .topContent{
      text-align: left;
    }
    .topContent .form-group{
      text-align: center;
    }
    #selTypeLink,#selLabelLink{
      display: inline-block;
      width: 100px;
      background: #F5F5F5;
      border: 1px solid #F5F5F5;
      border-radius: 4px;
      color: #666666;
      padding: 3px 0;
    }
  </style>
  <style>
    #grid-data-footer {background: #fff;}
    .fade .in{display: none;}
  </style>
  <link rel="stylesheet" type="text/css" href="https://s3.kaoshixing.com/static/admin/css/select_type_new.css?v=c5765202d257">
  <link rel="stylesheet" type="text/css" href="https://s0.kaoshixing.com/static/plugins/katex/katex.min.css?v=27f0bd8419">
  <script type="text/javascript" src="https://s3.kaoshixing.com/static/plugins/katex/katex.min.js?v=c158c9e823"></script>
  <script type="text/javascript" src="https://s4.kaoshixing.com/static/plugins/katex/contrib/auto-render.min.js?v=28cd0b98cd"></script>
  <script type="text/javascript">
    // 解析latex公式
    function renderFormula(selector, flag){ //flag预留，以备用于区分不同处理
      $(selector).each(function (index, element) {
        if(!$(element).hasClass("rendered")){
          var text = $(element).text();

          katex.render(text, element, {
            throwOnError: false
          });

          $(element).addClass("rendered");
        }
      });
    }
  </script>


</head>

<body>
<div>
  <div id="circle-box">
    <span class="circle-demo circle-5e83ec0f84030d26285bc97b" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e83ec0f84030d26285bc97a" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e83ec0f84030d26285bc979" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e83ec0f84030d26285bc978" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e83ec0f84030d26285bc977" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e7e267557aad21046d5d638" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e7e25d184030d6039bfc84a" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e7e007184030d6039bfc655" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e7df04357aad21046d5d4f1" style="opacity:0"><span class="circle-demo-s"></span></span><span class="circle-demo circle-5e7d6b4d84030d6039bf8234" style="opacity:0"><span class="circle-demo-s"></span></span></div>
  <form action="/" name="form" method="get" id="subForm">
    <input type="hidden" class="" name="search" value="true">
    <div class="topSelDiv">
      <div class="topContent">
        <div>
          <div class="form-group question_type">
            <label>试题分类:</label>
            <div id="selTypeLink">
              <span>选择分类</span>

            </div>
            <input type="hidden" class="" name="classification" value="">
            <input type="hidden" class="" name="exam_status" value="">

          </div>
          <div id="type_dialog">
            <iframe width="100%" height="300px" style="border:0px;margin:0 auto;" name="selTypeModal" id="selTypeModal"></iframe>
          </div>

          <div class="form-group">
            <label>试题难度:</label>

            <select name="difficult" class="modal_select select_nomal">
              <option value="" selected="">请选择</option>
              <option value="simple">简单</option>
              <option value="middle">普通</option>
              <option value="hard">困难</option>
            </select>
          </div>
          <div class="form-group" style="margin-right: 0px;">
            <label>创建时间:</label>
            <div class="calendar"><em></em><input name="dateForm" type="text" id="dateForm" value=""></div>
            <span>到</span>
            <div class="calendar"><em></em><input name="dateTo" type="text" id="dateTo" value=""></div>
          </div>
          <div class="form-group hidden">
            <label>试题状态:</label>

            <select name="status" class="modal_select select_nomal">
              <option value="" selected="">请选择</option>
              <option value="enable">正常</option>
              <option value="disable">禁用</option>
            </select>
          </div>

        </div>
        <div class="toolbarBottom">
          <a class="btn modal_btn_default btn_off" href="#" id="resetBtn">重置</a>
          <a class="btn modal_btn_default btn_on" href="#" id="searchBtn">搜索</a>
        </div>

        <div class="exchangeListContainer">
          <div class="exchangeListBtn questions_list active">试题列表</div>
          <div class="exchangeListBtn chosen_list">已选试题<span class="chosenAmount">0</span></div>
        </div>
      </div>

      <div id="tableTip" hidden="">
        <p>暂无试题</p>
        <p>请 <a href="#" id="tableAddBtn">点击此处</a> 录入试题</p>
      </div>

      <div id="tableTip1" hidden="">
        <p>暂无试题</p>
        <p>由于您无添加试题权限，请联系管理员录入试题</p>
      </div>

      <div role="tabpanel" class="tab-area tab-col2">
        <!-- Tab panes -->
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane active">
            <div class="rqm-table2 com-drop">
              <table id="grid-data" class="table bootgrid-table" checked_all="false" aria-busy="false">
                <thead>
                <tr>
                  <th data-column-id="id" data-visible="false" data-identifier="true" data-formatter="id"></th>
                  <th data-column-id="type" data-sortable="false" data-width="8%">题型</th>
                  <th data-visible="false" data-column-id="status" data-sortable="false" data-width="8%">状态</th>
                  <th data-column-id="questionClassificationName" data-sortable="false" data-width="10%">分类</th>
                  <th data-column-id="question" data-sortable="false">试题内容</th>
                  <th data-column-id="difficult" data-width="8%">难度</th>
                  <th data-column-id="createTime" data-width="20%">创建时间</th>
                </tr>
                </thead>
              </table>

              <table id="selected-grid-data" class="table" current-mode="question_list" style="display: none;">
                <thead>
                <tr>
                  <th data-column-id="id" data-visible="false" data-identifier="true" data-formatter="id"></th>
                  <th data-column-id="type" data-sortable="false" data-width="8%">题型</th>
                  <th data-visible="false" data-column-id="status" data-sortable="false" data-width="8%">状态</th>
                  <th data-column-id="questionClassificationName" data-width="10%">分类</th>
                  <th data-column-id="question" data-sortable="false">试题内容</th>

                  <th data-column-id="difficult" data-width="8%">难度</th>
                  <th data-column-id="createTime" data-width="20%">创建时间</th>
                </tr>
                </thead>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="buttonP">
        <a class="btn modal_btn_default btn_off" href="#" id="closeBtn">关闭</a>
        <a class="btn modal_btn_default btn_on" href="#" id="saveBtn">保存</a>
      </div>
    </div>
  </form>
</div>

<!-- Modal -->

<script type="text/javascript" src="https://s3.kaoshixing.com/static/base/js/jquery.min.js?v=8101d596b257"></script>
<script type="text/javascript" src="https://s5.kaoshixing.com/static/plugins/bootstrap/js/bootstrap.min.js?v=87d37353ad57"></script>
<script type="text/javascript" src="/static/common/plugins/bootgrid/jquery.bootgrid-ksx.js"></script>
<script type="text/javascript" src="https://s0.kaoshixing.com/static/plugins/pikaday/moment.js?v=94dde4ec2657"></script>
<script type="text/javascript" src="https://s1.kaoshixing.com/static/plugins/pikaday/pikaday.js?v=5c81b2646857"></script>
<script type="text/javascript" src="https://s3.kaoshixing.com/static/plugins/pikaday/pikaday.jquery.js?v=67f9aeffb457"></script>
  <script>
    var expireTime = JSON.parse(window.localStorage.getItem("EXPIRE_TIME"))
    var now = new Date()
    var year = now.getFullYear().toString()
    var month = (now.getMonth()+1).toString().length>1?(now.getMonth()+1).toString():"0"+(now.getMonth()+1).toString()
    var date = now.getDate().toString().length>1?now.getDate().toString():"0"+now.getDate().toString()
    var hour = now.getHours().toString().length>1?now.getHours().toString():"0"+now.getHours().toString()
    var minute = now.getMinutes().toString().length>1?now.getMinutes().toString():"0"+now.getMinutes().toString()
    var second = now.getSeconds().toString().length>1?now.getSeconds().toString():"0"+now.getSeconds().toString()
    var nowTime = year+month+date+hour+minute+second
    if(nowTime - expireTime >= -10){
      window.location.href = "/admin/login"
    }
  </script>
<script type="text/javascript">
  $.ajaxSetup({
    contentType:"application/x-www-form-urlencoded;charset=utf-8",
    headers:{
      Authentication:JSON.parse(window.localStorage.getItem("USER_TOKEN"))
    },
    statusCode: {
      404: function() {
        window.location.href="/admin/error/404";
      },
      504: function() {
        window.location.href="/admin/error/default";
      },
      500: function() {
        window.location.href="/admin/error/default";
      },
      429:function () {
        alert("您操作过于频繁！");
      },
      401:function () {
        window.location.href="/admin/error/401";
      },
      400:function () {
        window.location.href="/admin/error/400";
      },
      403:function () {
        window.location.href="/admin/error/403";
      },
    }
  });
  var user = JSON.parse(window.localStorage.getItem("USER"));
  var labelOpen = '0';
  var showtestqm = '1';
  var selectedIdsArr=[];//已选试题id数组
  var selectedIds="";//已选试题id，逗号分割的字符串
  $(document).ready( function() {
    //日历多语言
    var datePikadayLang =  {
      previousMonth : '上一月',
      nextMonth     : '下一月',
      months        : ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],
      weekdays      : ['周日','周一','周二','周三','周四','周五','周六'],
      weekdaysShort : ['周日','周一','周二','周三','周四','周五','周六']
    };

    //初始化日历控件
    var $dateForm = $('#dateForm').pikaday({
      firstDay: 1,
      format: 'YYYY-MM-DD',
      minDate: new Date('2000-01-01'),
      maxDate: new Date('2020-12-31'),
      yearRange: [2000,2030],
      i18n: datePikadayLang
    });
    var $dateTo = $('#dateTo').pikaday({
      firstDay: 1,
      format: 'YYYY-MM-DD',
      minDate: new Date('2000-01-01'),
      maxDate: new Date('2020-12-31'),
      yearRange: [2000,2030],
      i18n: datePikadayLang
    });

    //初始化表格
    function test(){
      $("#grid-data").bootgrid({
        ajax: true,
        ajaxSettings: {
          method:"POST",
          cache: false
        },
        url: "/api/question/show_question_grid/",
        selection: true,
        padding:1,
        rowSelect: false,
        // keepSelection:true,
        navigation: 2,
        multiSelect: true,
        post: function () {
          var sortOrder = $("#grid-data").bootgrid("getSortDictionary");
          var sortKey,sortOrderValue;
          var testStatus = $("select[name=status]").find("option:selected").val();
          var testType = parent.selTypes;
          var testChecked = parent.testChecked;
          var commitIds = parent.commit_ids;
          var testClassification= $("input[name=classification]").val();
          var label;
          label= $("input[name=label]").val();
          if (labelOpen==0) {
            label = '';
          }
          var testDifficult = $("select[name=difficult]").find("option:selected").val();
          var testStartTime = $("input[name=dateForm]").val();
          var testEndTime = $("input[name=dateTo]").val();
          $.each(sortOrder, function (name, value) {
            sortKey   = name;
            sortOrderValue = value;
          });
          return {
            "sortKey": sortKey,
            "sortOrder": sortOrderValue,
            "status": testStatus,
            "testType": testType,
            "commitIds": commitIds,
            "testDifficult": testDifficult,
            "label": label,
            "testClassification": testClassification,
            "testStartTime": testStartTime,
            "testEndTime": testEndTime,
            "testTypeCount":testChecked,
            "account":user.account,
            "companyId":user.companyId
          };
        },
        responseHandler:function(data){
          if (data.rows.length == 0){
            $('#subForm .tab-area').hide();
            //试题库权限
            if (showtestqm == 1) {
              $('#tableTip').show();
            }else {
              $('#tableTip1').show();
            }
          }
          return data;
        }
      }).on("loaded.rs.jquery.bootgrid",function(){
        // 解析latex公式
        renderFormula(".latex", false);

        showQuestionSelectedStatus();
        selectAllStyle();
        selectBoxCircle();
      })
    }

    //初始化已选表格
    function getSelectedQuestion(){
      $("#selected-grid-data").bootgrid({
        ajax: true,
        ajaxSettings: {
          method:"POST",
          cache: false
        },
        url: '/api/question/show_question_grid/',
        selection: true,
        padding:1,
        rowSelect: false,
        // keepSelection:true,
        navigation: 2,
        multiSelect: true,
        post: function () {
          var sortOrder = $("#grid-data").bootgrid("getSortDictionary");
          var sortKey,sortOrderValue;
          var testStatus = $("select[name=status]").find("option:selected").val();
          var testType = parent.selTypes;
          var testChecked = parent.testChecked;
          var commitIds = parent.commit_ids;
          var testClassification= $("input[name=classification]").val();
          var label;
          label= $("input[name=label]").val();
          if (labelOpen==0) {
            label = '';
          }
          var testDifficult = $("select[name=difficult]").find("option:selected").val();
          var testStartTime = $("input[name=dateForm]").val();
          var testEndTime = $("input[name=dateTo]").val();
          $.each(sortOrder, function (name, value) {
            sortKey   = name;
            sortOrderValue = value;
          });
          return {
            "sortKey": sortKey,
            "sortOrder": sortOrderValue,
            "status": testStatus,
            "testType": testType,
            "commitIds": commitIds,
            "testDifficult": testDifficult,
            "label": label,
            "testClassification": testClassification,
            "testStartTime": testStartTime,
            "testEndTime": testEndTime,
            "testTypeCount":testChecked,
            "selectedIds":selectedIds,
            "account":user.account,
            "companyId":user.companyId
          };
        },
        // responseHandler:function(data){
        //     if (data.rows.length == 0){
        //         $('#subForm .tab-area').hide();
        //         //试题库权限
        //         if (showtestqm == 1) {
        //             $('#tableTip').show();
        //         }else {
        //             $('#tableTip1').show();
        //         }
        //     }
        //     return data;
        // }
      }).on("loaded.rs.jquery.bootgrid",function(){
        // 解析latex公式
        renderFormula(".latex", false);
      })
    }
    $("#selected-grid-data").hide();
    test();

    //全选
//        $(".checkAll").change(function(e) {
//            if($(this).is(":checked")){
//                $(".checkSimple").each(function(index, element) {
//                    $(this).attr("checked" , "checked");
//                });
//            }else{
//                $(".checkSimple").each(function(index, element) {
//                    $(this).removeAttr("checked");
//                });
//            }
//        });
    //选择分类
    $("body").on("click", "#selTypeLink", function(e) {
      e.stopPropagation();
      e.preventDefault();
      $('#type_dialog').show();
      showSelType(this);
    });

    // 选择标签
    $("body").on("click", "#selLabelLink", function(e) {
      showSelLabel(this);
    });

    //重置表单
    $("#resetBtn").click(function(e) {
      $("form[name=form]")[0].reset();
      $("#selTypeLink").text("").append("<span>请选择</span>");
      $("#selLabelLink").text("请选择");
      $("input[name=classification]").val("");
      if (labelOpen==1) {
        $("input[name=label]").val("");
      }
    });

    /*--------------------------------------------选择试题优化----------------------------------------------------------------*/
    //小球动画
    $("body").on("transitionEnd webkitTransitionEnd",".circle-demo",function(e){
      $(this).removeAttr("style");
      $(".chosenAmount").addClass('active');
      $(".chosenAmount").text(selectedIdsArr.length);
      setTimeout(function () {
        $(".chosenAmount").removeClass('active');
      },500)
    })
    //选择试题优化-试题列表
    $("body").on("change","#grid-data tbody input.select-box",function(e){

      var tr = $(this).parents("tr");
      var id = tr.attr("data-row-id");
      //获取要动画结束的位置
      var endAnimation = $(".chosenAmount").offset();
      //获取当前点击对象位置
      var clickCurrent = $(this).siblings("span.select-box").offset();
      var currentCircle = $('.circle-'+id);

      if (tr.attr("aria-selected") == "true") { //作增加
        selectedIdsArr.push(id);

        $(currentCircle).css({
          "opacity":"1",
          "top":clickCurrent.top+"px",
          "left":clickCurrent.left+"px",
        })

        setTimeout(function(){
          currentCircle.css({
            "opacity":"1",
            "transform": "translate3d("+(endAnimation.left-clickCurrent.left)+"px,"+(endAnimation.top-clickCurrent.top)+"px,0)",
            "transition":"transform .88s cubic-bezier(0.3, -0.25, 0.7, -0.15)",
          })
        },200)

      } else { //作删除
        var index = selectedIdsArr.indexOf(id);
        if (index > -1) {
          selectedIdsArr.splice(index, 1);
        }
        $(".chosenAmount").text(selectedIdsArr.length);
      }
      selectAllStyle();
    })
    $("body").on("change","#grid-data thead input.select-box",function(e){//增加全部、移除全部
      var all_arr = [];
      $("#grid-data tbody input.select-box").each(function (index, element) {
        var id = $(this).val();
        all_arr.push(id);
      });
      if ($("#grid-data").attr("checked_all")=='false') {
        var tmp_arr = [];
        tmp_arr=all_arr.filter(function(v){
          return selectedIdsArr.indexOf(v)<=-1;
        });
        selectedIdsArr=selectedIdsArr.concat(tmp_arr);
        $("#grid-data").attr("checked_all","true");
      } else {
        all_arr.forEach(function(v,i){
          var index=selectedIdsArr.indexOf(v);
          if (index > -1) {
            selectedIdsArr.splice(index, 1);
          }
        });
        removeSelectedStyle();
        $("#grid-data").attr("checked_all","false");
      }
      $(".chosenAmount").text(selectedIdsArr.length);
      selectAllStyle();
    })
    //选择试题优化-已选列表
    $("body").on("change","#selected-grid-data tbody input.select-box",function(e){
      e.stopPropagation();
      e.preventDefault();
      var tr = $(this).parents("tr");
      var id = tr.attr("data-row-id");
      var index = selectedIdsArr.indexOf(id);//作删除
      if (index > -1) {
        selectedIdsArr.splice(index, 1);
      }
      tr.remove();
      $(".chosenAmount").text(selectedIdsArr.length);
    })
    $("body").on("change","#selected-grid-data thead input.select-box",function(e){//移除全部
      e.stopPropagation();
      e.preventDefault();
      var tr=$("#selected-grid-data tbody tr");
      var all_arr = [];
      $("#selected-grid-data tbody input.select-box").each(function (index, element) {
        var id = $(this).val();
        all_arr.push(id);
      });
      all_arr.forEach(function(v,i) {
        index = selectedIdsArr.indexOf(v);
        if (index > -1) {
          selectedIdsArr.splice(index, 1);
        }
      });
      tr.find("td").hasClass('no-results')?'':tr.remove(); //数据为空，保留"没有找到相关结果!"这一行，否则移除全部
      $(".chosenAmount").text(selectedIdsArr.length);
    })
    //选择试题优化-列表切换
    $("body").on("click",".exchangeListBtn.questions_list",function(e){ //试题列表
      e.stopPropagation();
      e.preventDefault();
      $(".exchangeListBtn").toggleClass("active");
      $("#grid-data").bootgrid("deselect");//清除插件记录的勾选项（仅仅修改checkbox的状态还不行，看上去没被勾选，一旦有其他项被勾，会导致这些选项也跟着被勾）
      removeSelectedStyle();
      showQuestionSelectedStatus();
      // console.log("打印插件勾选记录:",$("#grid-data").bootgrid("getSelectedRows"));
      if($("#grid-data tbody tr.active").length!=$("#grid-data tbody tr").length){ //当前不是所有列都被选，移除'全选'标记
        $("#grid-data thead input.select-box").removeAttr("checked");
        $("#grid-data").attr("checked_all","false");
      }
      $("#grid-data").show();
      $("#grid-data-footer").show();
      $("#selected-grid-data").hide();
    })
    $("body").on("click",".exchangeListBtn.chosen_list",function(e){ //已选试题
      e.stopPropagation();
      e.preventDefault();
      $(".exchangeListBtn").toggleClass("active");
      selectedIds=selectedIdsArr.join(",");
      $('#tableTip').hide();
      $('#tableTip1').hide();
      $("#grid-data").hide();
      $("#grid-data-footer").hide();
      $("#selected-grid-data").show();
      $("#selected-grid-data").bootgrid("destroy");
      getSelectedQuestion();
    })
  });

  //当试题完毕后在每个选择框内添加自己的小球
  function selectBoxCircle() {
    $("#grid-data tbody tr").each(function (index, element) {
      $("#circle-box").append('<span class="circle-demo circle-'+$(this).attr("data-row-id")+'" style="opacity:0"><span class="circle-demo-s"></span></span>');
    })
  }

  //选择试题优化-试题增减的回显
  function showQuestionSelectedStatus() {
    var all_arr = [];
    $("#grid-data tbody input.select-box").each(function (index, element) {
      var id = $(this).val();
      all_arr.push(id);
    });
    var selected_arr = selectedIdsArr.filter(function (v) {
      return all_arr.indexOf(v) > -1
    }) //当前试题列表显示的试题中，被选过的试题
    $("#grid-data tbody tr").removeClass("active").attr("aria-selected","false").find("input.select-box").removeAttr("checked");
    selected_arr.forEach(function (id, index) {
      $("#grid-data tbody tr[data-row-id="+id+"]").addClass("active").attr("aria-selected","true").find("input.select-box").prop("checked",true);
    });
  }

  //鼠标移入图标样式
  $("body").on("mouseenter","#grid-data tbody tr,#selected-grid-data tbody tr",function(){
    if(!$(this).hasClass("active")) {
      $(this).find("td").css("border-color", "#F6F7FA");
      $(this).find("span.select-box").css("border-color", "#E0E2E3");
    }
  })

  $("body").on("mouseenter","#grid-data  span.select-box,#selected-grid-data  span.select-box",function(){
    $(this).find("td").css("border-color","unset");
    $(this).find("i").css("color","#1A8CFE");
    $(this).css("border-color","#1A8CFE");
  })

  $("body").on("mouseleave","#grid-data  span.select-box,#selected-grid-data  span.select-box",function(){
    $(this).find("td").css("border-color","unset");
    if(!$(this).parents("tr").hasClass("active")||$(this).parents("thead").length!=0) {
      $(this).find("i").css("color", "#E0E2E3");
      $(this).css("border-color", "#E0E2E3");
    }
  })

  function removeSelectedStyle(){
    $("tr td,tr span.select-box,tr .icons8-checked-checkbox").removeAttr("style");
  }

  function selectAllStyle(){ //勾选全部图标回显
    if($("#grid-data tbody tr.active").length!=$("#grid-data tbody tr").length){
      $("#grid-data thead input.select-box").removeAttr("checked");
      $("#grid-data").attr("checked_all","false");
    }else{
      $("#grid-data thead input.select-box").attr("checked",true);
      $("#grid-data").attr("checked_all","true");
    }
  }
  /*-------------------------------------------------------------------------------------------------------------------------------*/


  //点击搜索
  $("body").on("click", "#searchBtn", function(e) {
    e.stopPropagation();
    e.preventDefault();
    selectedIds=selectedIdsArr.join(",");
    if($(".exchangeListBtn.questions_list").hasClass("active")){
      $("#grid-data").bootgrid("reload");
    }else{
      $("#selected-grid-data").bootgrid("reload");
    }
  });
  $("body").on("click", ".searchIcon", function(e) {
    if($(".exchangeListBtn.questions_list").hasClass("active")){
      $("#grid-data").bootgrid("reload");
    }else{
      $("#selected-grid-data").bootgrid("reload");
    }
  });

  //创建时间长度截取
  $(".questionCreateTime").each(function(index, element) {
    var text = $(this).text();
    var last = text.lastIndexOf(".");
    var t = text.substr(0,last);
    $(this).text(t);
  });
  //显示选择分类对话框
  function showSelType(obj){
    selTypeModal.location.href = "/admin/paper_add_new/tests_class3";
  }
  //关闭选择分类对话框
  function hideSelType(obj){
    $('#type_dialog').hide();
  }
  //接受选择分类数据
  function selType(id,name){
    $("input[name=classification]").val(id);
    $("#selTypeLink").text('已选择');
  }

  //显示选择标签对话框
  function showSelLabel(obj) {
    selLabelModal.location.href = "/baseinfo/admin/tree/tests_label";
    $("#labelModal").modal({
      backdrop: "static",
      keyboard: false
    });
  }
  function selType(ids,names){
    $("input[name=classification]").val(ids);
    $("#selTypeLink span").text(names.substr(0,names.length - 1));
  }
  //关闭选择标签对话框
  function hideSelLabel(obj){
    $('#labelModal').modal('hide');
  }
  // 接受选择标签数据
  function selLabel(data) {
    var ids = '';
    for (var i = 0; i < data.length; i++) {
      ids += data[i].id + ',';
    }
    ids = ids.slice(0,ids.length - 1);
    $("input[name=label]").val(ids);
    $("#selLabelLink").text('已选择');
  }

  //接受考试选择
  $("#saveBtn").click(function(e) {
    var num = 0;
    var ids = selectedIdsArr.join(",");
    // $(".select-box").each(function(index, element) {
    //     if($(this).is(":checked")&&$(this).val()!="all"){
    //         var id = $(this).val();
    //         ids += id + ",";
    //         num++;
    //     }
    // });
    if(ids==""){
      alert("请选择试题！");
      return;
    }else{
      parent.hideSelQuestions();
      parent.selQuestion(ids,num,0);
    }
  });
  //关闭对话框
  $("#closeBtn").click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    parent.hideSelQuestions('');
  });
  $('#tableAddBtn').click(function (e) {
    e.preventDefault();
    e.stopPropagation();
    parent.hideSelQuestions('fromTableAddBtn');
  });

</script>
<script>
  function getParam(paramName)
  {
    paramValue = "";
    isFound = false;
    if (this.location.search.indexOf("?") == 0 && this.location.search.indexOf("=")>1)
    {
      arrSource = unescape(this.location.search).substring(1,this.location.search.length).split("&");
      i = 0;
      while (i < arrSource.length && !isFound)
      {
        if (arrSource[i].indexOf("=") > 0)
        {
          if (arrSource[i].split("=")[0].toLowerCase()==paramName.toLowerCase())
          {
            paramValue = arrSource[i].split("=")[1];
            isFound = true;
          }
        }
        i++;
      }
    }
    return paramValue;
  }
</script>



<div class="pika-single is-hidden is-bound" style=""></div><div class="pika-single is-hidden is-bound" style=""></div></body></html>
